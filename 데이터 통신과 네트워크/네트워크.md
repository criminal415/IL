## 1. 네트워크

- 네트워크는 통신이 가능한 서로 연결된 장치의 모임이다.
  > 이 정의 에서 장치는 컴퓨터, 워크스테이션, 스마트폰, 보안 시스템과 같은 호스트(host, 종단 시스템(end system)이라고도 함)가 될 수 있다.
  > 이 정의 에서 장치는 네트워크와 다른 네트워크를 연결하는 라우터, 서로 장치들을 연결하는 교환기, 데이터의 형태를 변경하는 모뎀 등과 같은 연결 장치(connecting device)가 될 수 있다.
- 네트워크에서 장치들은 케이블과 공기와 같은 유선 또는 무선 통신 매체를 통하여 연결된다.

### 1.1 네트워크 평가기준

- 성능(performance) : 전달시간이나 응답시간을 측정하는 등 여러 가지 방법으로 측정가능하다.
  - 전달시간(transit time) : 메시지가 한 장치에서 다른 장치로 이동하는 데에 걸리는 시간
  - 응답시간(response time) : 요구와 응답에 경과된 시간
    > 네트워크의 성능은 사용자 수, 전송매체의 종류, 연결된 하드웨어의 성능, 소프트웨어의 효율성 등을 포함한 여러 요인에 따라 다를 수 있다.
  - 성능은 흔히 처리량(throughput)과 지연(delay)이라는 두 가지 척도로 평가된다. 흔히 지연은 적어야 하고 처리량은 많이 필요하게 된다.
    > 네트워크를 통해 더 많은 데이터를 보내면 처리량은 늘어나고, 네트워크의 트래픽 혼잡으로 인하여 지연 시간이 늘어나게 된다.
- 신뢰성(reliability) : 네트워크의 정확성과 함께 고장의 빈도수와 고장이 나서 링크를 복구하는 데 소요되는 시간, 그리고 재난 발생시 네트워크의 견고성등에 의해 측정
- 보안(security) : 불법적인 접근으로부터 데이터 보호, 손상으로부터 데이터 보호, 개발, 정책 구현, 침해나 데이터 손실로부터 복구 절차등이 포함된다.

### 1.2 패킷 교환 망

컴퓨터 네트워크에서, 두 종단 사이의 통신은 패킷(packet)이라 불리는 데이터 블록에 의해 이루어진다. 패킷 교환 망에서 라우터는 팻킷을 저장하고 포워딩하기 위한 큐(queue)를 갖는다.

## 2. 네트워크 모델

### 2.1 프로토콜 계층화

![image](https://user-images.githubusercontent.com/90595291/148533519-937e3a32-ebe9-478f-9765-7c32cc7fcada.png)

### 2.2 프로토콜 계층화의 원칙

1. 만약 양 방향 통신을 원한다면, 각 계층이 각 방향으로 한가지씩, 상반되는 두 가지 작업을 수행할 수 있도록 만들어야 한다.(위 그림에서 첫 번째 계층은 편지를 주고 받으며 두 번째 계층은 암호화와 복호와 세 번째 계층은 듣기와 말하기를 수행하고 있다.)
2. 양 측의 각 계층에 있는 객체는 서로 동일해야 한다.(예를 들어, 양측에 있는 3계층의 객체는 모두 평문, 2계층의 객체는 모두 암호문, 1계층의 객체는 모두 편지의 일부여야 한다.)

### 2.3 TCP/IP 프로토콜 그룹

TCP/IP(Transmission Control Protocol/Internet Protocol)는 현재의 인터넷에서 사용하는 프로토콜 그룹(여러 계층들에서 조직된 프로토콜 집합)이다.(상호 작용하는 모듈로 이루어진 계층적 프로토콜이며, 각 모듈은 특정한 기능을 제공)
![image](https://user-images.githubusercontent.com/90595291/148535267-2761376d-342d-42e6-b28d-4143197a6278.png)

- 계층적 구조 : 위 그림에서 컴퓨터 A와 컴퓨터 B가 통신을 한다고 가정하면, 이 통신은 5개의 통신 장비, 즉 발신지 호스트(A), 링크 1의 링크층 스위치, 라우터, 링크 2의 링크층 스위치, 목적지 호스트(B)를 갖는다. 각 장비는 인터넷 안에서의 역할에 따라 계층들과 관련되며, 두 호스트들은 5개 계층 모두와 관련 있다.
  ![image](https://user-images.githubusercontent.com/90595291/148538069-f0ddb7b4-0932-4cce-bbbd-b709d15af7fa.png)
  (참고, 라우터가 n개의 링크와 연결되어 있다면, n개의 링크층, 물리층과 관련되며, 네트워크 층으로부터 받은 패킷을 단편화(fragmentation)한후 받은 양보다 더 많은 패킷을 전송할지도 모른다.) - 물리층 : 프레임의 각 비트들을 링크 건너편으로 전달할 책임이 있다. 비록 물리층이 TCP/IP 프로토콜 그룹에서 가장 낮은 단계의 계층이긴 하지만, 또 다른 숨겨진 계층인 전송매체가 물리층 아래에 존재하기 때문에 물리층에서의 두 장치 사이의 통신은 여전히 논리적 통신이다.(두 장치는 전송 매체에 의해 연결) 데이터 링크층으로부터 받은 프레임의 비트들은 변환되고 전송된다.(두 물리층 사이의 논리적 단위는 하나의 비트) - 데이터 링크층 : 데이터그램(datagram)이 호스트로부터 목적지까지 전달될 수 있는 중첩되는 여러개의 링크 쌍이 존재할 수 있으며, 라우터들은 최상의 링크를 선택할 책임이 있다. 전송할 다음 링크가 라우터에 의해 결정되면 데이터 링크층은 데이터그램을 받아 해당 링크로 전송할 책임이 있다. 데이터 링크층은 데이터 그램을 받아서 프레임(frame)이라고 하는 패킷으로 캡슐화한다. - 네트워크층 : 발신지 컴퓨터와 목적지 컴퓨터 사이의 연결을 생성하기 위한 책임을 가진다. 네트워크층의 통신은 host-to-host이다. 그러나 발신지로부터 목적지까지 여러 라우터들이 존재할 수 있기 떄문에 경로상의 라우터들은 각 패킷을 위한 최선의 경로를 선택할 책임을 가진다. 인터넷에서 네트워크층은 주요한 프로토콜로서 네트워크층에서 데이터 그램이라는 패킷의 형식을 정의하는 인터넷 프로토콜(IP)을 포함한다. IP는 또한 이 계층에서 사용되는 주소의 구조와 형식을 정의한다.(그 외에도 인터넷 제어 메시지 프로토콜(ICMP, Internet Control Message Protocol), 인터넷 그룹 관리 프로토콜(IGMP, Internet Group Management Protocol), 동적 호스트 설정 프로토콜(DHCP, Dynamic Host Configuration Protocol), 주소 변환 프로토콜(ARP, Address Resolution Protocol)의 보조 프로토콜들을 가지고 있다.) - 전송층 : 전송층의 논리적 연결은 end-to-end이며, 발신지 호스트의 전송층은 응용층으로부터 메시지를 받아 전송층 패킷으로 캡슐화한 후(다른 프로토콜에서는 segment 또는 데이터그램이라 부른다.) 목적지 호스트의 전송층에 논리적 연결을 통해 전송한다. 주로 사용되는 프로토콜인 전송 제어 프로토콜(TCP, Transmission Control Protocol)은 데이터를 전송하기 전에 먼저 두 호스트의 전송층 사이에 논리적 연결을 설정하는 연결 지향 프로토콜이다. TCP는 흐름제어, 오류제어, 혼잡제어를 제공한다. 또다른 일반적인 프로토콜 중 하나인 사용자 데이터 그램 프로토콜(UDP, User Datagram Protocol)은 논리적 연결을 설립하지 않고 사용자 데이터그램을 전송하는 비연결형 프로토콜이다.(흐름제어, 오류제어, 혼잡제어 제공안함) 참고로 하루가 다르게 증가하는 멀티미디어를 위해서 스트림 제어 전송 프로토콜(SCTP, Stream Control Transport Protocol)또한 디자인 되었다. - 응용층 : 논리적 연결은 end-to-end이며, 통신은 모든 계층을 통과해서 이루어 진다. 통신을 위해 하나의 프로세스는 다른 프로세스에 요청 메시지를 전송하고 응답 메시지를 수신한다.(process-to-process communication) 하이퍼텍스트 전송 프로토콜(HTTP, Hypertext Transfer Protocol)은 월드 와이드 웹에 접속하기 위한 수단이다. 그 외에 단순 우편 전달 프로토콜(SMTP), 파일 전송 프로토콜(FTP), 텔넷과 보안 쉘(SSH), 도메인 이름 시스템(DNS:컴퓨터의 네트워크층 주소를 찾기 위해 다른 프로토콜들에 의해 사용된다.)등의 프로토콜이 있다.

## 2.4 캡슐화와 역캡슐화

> 인터넷에서 프로토콜 계층화를 할 때 중요한 개념 중 하나가 바로 캡슐화(encapsulation)/역캡슐화(decapsulation)이다.
> ![image](https://user-images.githubusercontent.com/90595291/148549115-5490878f-6573-4de9-9d8a-e5b625f8c26e.png)

### 1. 발신지 호스트에서 캡슐화

    1. 응용층에서 교환되는 데이터는 메시지로 불린다. 주로 어떤 헤더(header)나 트레일러(trailer)를 포함하지는 않지만 포함하게 된다면 이 전체를 메시지라고 부른다.

    2. 전송층은 전송층이 반드시 처리해야 하는 페이로드(payload)로 메시지를 받고 전송층 헤더를 페이로드에 붙이는데, 이것은 통신을 원하는 발신지와 도착지의 응용의 식별자들과 더불어 흐름제어, 오류제어, 또는 혼잡제어 같이 필요한 정보를 담은 메시지의 end-to-end 전송을 위해 필요한 추가적인 정보들을 포함한다. 이러한 과정의 결과물은 세그먼트(TCP) 또는 사용자 데이터 그램(UDP)이라 불리는 전송층 패킷(transport-layer packet)이라고 한다.

    3. 네트워크층은 전송층 패킷을 데이터 또는 페이로드로 받아 자신의 헤더를 페이로드에 추가한다. 헤더는 발신지와 목적지의 주소화 헤더의 오류검사, 단편화 정보 등을 위해 사용되는 추가적인 정보들을 포함한다. 이러한 과정의 결과물은 데이터그램이라고 불리는 네트워크층 패킷(network-layer packet)이라고 한다.

    4. 데이터 링크층은 네트워크층 패킷을 데이터 또는 페이로드로 받고 호스트 또는 다음 홉(router)의 링크층 주소를 포함하는 자신의 헤더를 추가한다. 이러한 과정의 결과물은 프레임(frame)이라 불리는 링크층 패킷(link-layer packet)이라고 한다.

### 2. 라우터에서 역캡슐화와 캡슐화

> 라우터의 경우 라우터가 2개 또는 그이상의 링크들과 연결되어 있기 때문에 역캡슐화와 캡슐화 모두 일어난다.

    1. 데이터 링크층에 일련의 비트들이 전송된 후에 이 계층은 프레임으로부터 데이터 그램을 역캡슐화 하고 그것을 네트워크층에 보낸다.

    2. 네트워크층은 오직 데이터그램 헤더에서 발신지와 도착지 주소를 조사하고 데이터그램이 전송될 다음 홉을 찾기 위해 포워딩 테이블을 조사한다.(데이터그램의 내용은 만약 그것의 사이즈가 다음 홉을 통과하기에 너무 커서 데이터그램을 단편화 할 필요가 생기지 않는 이상 라우터의 네트워크층에 의해 변경되어서는 안된다.)

    3. 다음 링크의 데이터 링크층은 프레임에서 그 데이터그램을 캡슐화하고 전송을 위해 물리층에 그것을 보낸다.

### 3. 목적지 호스트에서 역캡슐화

> 목적지 호스트에서 각 계층은 메시지가 응용층에 도달할 때까지 수신된 패킷을 역캡슐화하고, 페이로드를 떼어내어 그것을 한 단계 높은 프로토콜 계층에 전송하는 역할 만을 수행한다.(오류검사 포함)

## 2.5 주소 지정

![image](https://user-images.githubusercontent.com/90595291/148552300-995dea66-d889-4ed6-b9bf-2e27566a174b.png)

> 물리층은 주소를 필요로 하지 않기 때문에 4쌍의 주소만을 가진다.

- 응용층에서는 ozam.shop과 같은 서비스를 제공하는 사이트 이름, 혹은 ozam@naver.com과 같은 전자우편 주소를 이용한다.
- 전송층에서 사용하는 주소는 포트번호라고 한다. 포트 번호는 동시에 동작하는 여러 개의 프로그램을 구분하기 위한 지역 주소(local addresses)이다.
- 네트워크층에서 주소는 전역적이며 전체 인터넷을 범위로 갖는다. 하나의 네트워크 주소는 인터넷에 접속하는 장치를 유일하게 정의하는 주소이다.
- 링크층 주소(MAC 주소)는 지역적으로 정의된 주소이며, 이 각각의 주소는 네트워크에서 특정 호스트 또는 라우터를 정의한다.
